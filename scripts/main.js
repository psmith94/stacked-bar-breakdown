"use strict";var rand=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:99;return Math.round(Math.random()*t)},colours=[["#F478A0","#F693B3","#F8AEC6","#FAC9D9","#FCE4EC"],["#A7E16D","#B8E78A","#CAEDA7","#DBF3C4","#EDF9E1"],["#4AC8E2","#6ED3E7","#92DEED","#B6E9F3","#DAF4F9"],["#F9C364","#FACF83","#FBDBA2","#FCE7C1","#FDF3E0"],["#6A77EA","#8792EE","#A5ADF2","#C3C8F6","#E1E3FA"],["#ED8EEE","#F0A4F1","#F4BBF4","#F7D1F8","#FBE8FB"]],maxLevels=5,chart=d3.select("#chart"),_chart$node$getBoundi=chart.node().getBoundingClientRect(),width=_chart$node$getBoundi.width,height=width/2,makeRow=function t(r,n){var a=[],e=0;n=n||rand(20);for(var o=0;o<n;o++){var l=rand(),i={val:l,level:r,color:colours[r%colours.length][o%colours[r%colours.length].length],x0:e,x1:e+=l};r<maxLevels&&(i.children=t(r+1),i.x=d3.scale.linear().domain([0,d3.max(i.children.map(function(t){return t.x1}))]).range([0,width])),a.push(i)}return a},data=makeRow(0,7),x=d3.scale.linear().domain([0,d3.max(data.map(function(t){return t.x1}))]).range([0,width]),y=d3.scale.ordinal().domain([0,1,2,3,4,5]).rangeRoundBands([0,height],.2),svg=chart.append("svg").attr("width",width).attr("height",height),addRow=function r(t,n){if(t.children){svg.selectAll(".row").filter(function(r){return r>=t.level}).transition().attr("opacity",0).remove();var a=svg.append("g").datum(t.level).attr("class","row");a.attr("opacity",0).attr("transform","translate(0,"+(y(t.level)||0)+")").transition().duration(777).attr("opacity",1).attr("transform","translate(0,"+y(t.level+1)+")");var e=a.selectAll("rect").data(t.children).enter().append("rect").attr("fill",function(t){return t.color}).attr("x",n(t.x0||0)).attr("width",n(t.val||0)).attr("y",0).attr("height",y.rangeBand()).on("click",function(n){return r(n,t.x)}).on("mouseover",function(r){t.level+2<colours.length&&e.filter(function(t){return r===t}).attr("fill",colours[t.level+2][0])}).on("mouseout",function(){e.attr("fill",function(t){return t.color})});e.transition().duration(777).attr("width",function(r){return t.x(r.val)}).attr("x",function(r){return t.x(r.x0)})}};addRow({children:data,level:-1,x:x},x);